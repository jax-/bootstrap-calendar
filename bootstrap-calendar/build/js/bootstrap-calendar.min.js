this.CalendarTemplates=this.CalendarTemplates||{},this.CalendarTemplates.alert=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="alert alert-',(g=c.alertType)?f=g.call(b,{hash:{},data:e}):(g=b&&b.alertType,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' alert-dismissible" role="alert">\r\n    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\r\n    ',(g=c.alertMessage)?f=g.call(b,{hash:{},data:e}):(g=b&&b.alertMessage,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"\r\n</div>"}),this.CalendarTemplates.calendar=Handlebars.template(function(a,b,c,d,e){function f(a){var b="";return b+="\r\n            <th>\r\n                "+o(typeof a===n?a.apply(a):a)+"\r\n            </th>\r\n            "}function g(a,b){var d,e="";return e+='\r\n    <tr class="week">\r\n        ',d=c.each.call(a,a&&a.days,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n    </tr>\r\n    "}function h(a,b){var d,e,f="";return f+='\r\n        <td class="',d=c["if"].call(a,a&&a.date_string,{hash:{},inverse:q.noop,fn:q.program(5,i,b),data:b}),(d||0===d)&&(f+=d),f+='" data-day="',(e=c.dayValue)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dayValue,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'">\r\n            <div class="week-day-div ',d=c["if"].call(a,a&&a.current,{hash:{},inverse:q.noop,fn:q.program(7,j,b),data:b}),(d||0===d)&&(f+=d),f+='">\r\n                <ul style="list-style:none;">\r\n                    <li><span class="date ">',(e=c.date_string)?d=e.call(a,{hash:{},data:b}):(e=a&&a.date_string,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"</span></li>\r\n                    ",d=c.each.call(a,a&&a.events,{hash:{},inverse:q.noop,fn:q.programWithDepth(9,k,b,a),data:b}),(d||0===d)&&(f+=d),f+="\r\n                </ul>\r\n            </div>\r\n        </td>\r\n        "}function i(){return" week-day "}function j(){return" current "}function k(a,b,d){var e,f,g,h="";return h+='\r\n                    <li>\r\n                        <span class="event" data-day="'+o((e=d&&d.dayValue,typeof e===n?e.apply(a):e))+'" data-eventid="',(f=c.eventId)?e=f.call(a,{hash:{},data:b}):(f=a&&a.eventId,e=typeof f===n?f.call(a,{hash:{},data:b}):f),h+=o(e)+'" style="background-color:'+o((e=a&&a.color,typeof e===n?e.apply(a):e))+'">\r\n                            <span>'+o((e=a&&a.personName,typeof e===n?e.apply(a):e))+" - "+o((f=c.formatEventName||a&&a.formatEventName,g={hash:{},data:b},f?f.call(a,a&&a.eventName,g):p.call(a,"formatEventName",a&&a.eventName,g)))+"</span>\r\n                        </span>\r\n                    </li>\r\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m="",n="function",o=this.escapeExpression,p=c.helperMissing,q=this;return m+='\r\n<table class="table calendar">\r\n    <thead>\r\n        <tr>\r\n            ',l=c.each.call(b,b&&b.weekdays,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(l||0===l)&&(m+=l),m+="\r\n        </tr>\r\n    </thead>\r\n    ",l=c.each.call(b,b&&b.weeks,{hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e}),(l||0===l)&&(m+=l),m+="\r\n\r\n</table>"}),this.CalendarTemplates.calendarContainer=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+='\r\n\r\n<ul class="nav nav-tabs">\r\n    <li class="active"><a href="#calendar-tab" data-toggle="tab">'+k((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.CALENDAR,typeof b===j?b.apply(a):b))+'</a></li>\r\n    <li><a href="#events-tab" data-toggle="tab">'+k((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.EVENT_LIST,typeof b===j?b.apply(a):b))+'</a></li>\r\n</ul>\r\n\r\n<div id="calendar-tab">\r\n    <div class="calendar-container"></div>\r\n</div>\r\n<div id="events-tab" style="display:none;">\r\n    <div class="event-container"></div>\r\n</div>\r\n\r\n'}function g(){return'\r\n<div class="calendar-container"></div>\r\n<div class="event-container"></div>\r\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="calendar-alertarea"></div>\r\n<div class="calendar-panel-top"></div>\r\n',h=c["if"].call(b,b&&b.tabbedEventList,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\r\n\r\n<div class="calendar-panel-bottom"></div>\r\n\r\n<div class="calendar-loader"></div> '}),this.CalendarTemplates.eventModal=Handlebars.template(function(a,b,c,d,e){function f(){return"\r\n                            <span>Select person:</span>\r\n                        "}function g(a){var b,c="";return c+="\r\n                            <span>"+m((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.PERSON_NAME,typeof b===l?b.apply(a):b))+"</span>\r\n                        "}function h(a,b){var e,f="";return f+="\r\n                            ",e=n.invokePartial(d.selectPartial,"selectPartial",a,c,d,b),(e||0===e)&&(f+=e),f+="\r\n                        "}function i(){return'\r\n                            <input class="person form-control"> \r\n                        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this;return k+='<div id="calendarEventModal" class="modal fade">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">'+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.CLOSE,typeof j===l?j.apply(b):j))+'</span></button>\r\n                <h4 class="modal-title">'+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.MODAL_TITLE,typeof j===l?j.apply(b):j))+' <span class="modalTitleDate"></span></h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <p>'+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.MODAL_BODY,typeof j===l?j.apply(b):j))+'</p>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        ',j=c["if"].call(b,b&&b.enable_dropdown,{hash:{},inverse:n.program(3,g,e),fn:n.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+='\r\n                    </div>\r\n                    <div class="col-md-7 col-lg-7">\r\n                        ',j=c["if"].call(b,b&&b.enable_dropdown,{hash:{},inverse:n.program(7,i,e),fn:n.program(5,h,e),data:e}),(j||0===j)&&(k+=j),k+='\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        <span>'+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.EVENT_NAME,typeof j===l?j.apply(b):j))+':</span>\r\n                    </div>\r\n                    <div class="col-md-7 col-lg-7">\r\n                        <textarea maxlength="500" rows="4" class="eventName form-control" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        '+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.TIME_FROM,typeof j===l?j.apply(b):j))+':\r\n                    </div>\r\n                    <div class="col-md-7 col-lg-7">\r\n                        <input type="range" class="timeFrom" name="timeFrom" step="1" min="0" max="24" value="10">\r\n                        <div class="timeFrom-output"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        '+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.TIME_TO,typeof j===l?j.apply(b):j))+':\r\n                    </div>\r\n\r\n                    <div class="col-md-7 col-lg-7">\r\n                        <input type="range" class="timeTo" name="timeTo" step="1" min="0" max="24" value="11">\r\n                        <div class="timeTo-output"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <input type="hidden" class="eventId" />\r\n                <input type="hidden" class="eventDay" />\r\n\r\n                <div style="clear:both"></div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary add-event">'+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.ADD,typeof j===l?j.apply(b):j))+'</button>\r\n                <button type="button" class="btn btn-primary edit-event">'+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.EDIT,typeof j===l?j.apply(b):j))+'</button>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">'+m((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.CLOSE,typeof j===l?j.apply(b):j))+"</button>\r\n            </div>\r\n        </div><!-- /.modal-content -->\r\n    </div><!-- /.modal-dialog -->\r\n</div><!-- /.modal -->\r\n\r\n<script>\r\n    $('.timeFrom').change(function () {\r\n        var out = $('.timeFrom-output');\r\n        var value = $(this).val();\r\n        out.html(format(value));\r\n    });\r\n\r\n    $('.timeTo').change(function () {\r\n        var out = $('.timeTo-output');\r\n        var value = $(this).val();\r\n        out.html(format(value));\r\n    });\r\n\r\n    $(function (){\r\n        $('.timeFrom').trigger('change');\r\n        $('.timeTo').trigger('change');\r\n    });\r\n\r\n    $('.timeTo,.timeFrom').keydown(function () {\r\n        $(this).trigger('change');\r\n    });\r\n\r\n    var format = function (val) {\r\n\r\n        var hour = val;\r\n        if (hour < 10)\r\n            hour = '0' + hour;\r\n\r\n        return hour + ':00';\r\n        \r\n\r\n        //var hour = Math.floor(val / 4);\r\n        //if (hour < 10)\r\n        //    hour = '0' + hour;\r\n\r\n        //var minute = Math.floor((val % 4) * 15);\r\n        //if (minute < 10)\r\n        //    minute = '0' + minute;\r\n\r\n        //return hour + ':' + minute;\r\n    };\r\n\r\n    var validate = function () {\r\n        var timeTo = $('.timeTo');\r\n        var timeFrom = $('.timeFrom');\r\n\r\n        if (timeFrom.val() > timeTo.val()) {\r\n            timeFrom.val(timeTo.val());\r\n            timefrom.trigger('change');\r\n        }\r\n        else if (timeTo.val() < timeFrom.val())\r\n        {\r\n            timeTo.val(timeFrom.val());\r\n            timeTo.trigger('change');\r\n        }\r\n    };\r\n\r\n</script>"}),this.CalendarTemplates.events=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\r\n                <th>\r\n                    "+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.ID,typeof b===p?b.apply(a):b))+"\r\n                </th>\r\n                "}function g(a){var b,c="";return c+="\r\n                <th>\r\n                    "+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.ACTIONS,typeof b===p?b.apply(a):b))+"\r\n                </th>\r\n                "}function h(){return"\r\n                <th></th>\r\n                <th></th>\r\n                "}function i(a,b,d){var e,f,g,h="";return h+='\r\n            <tr class="',e=c["if"].call(a,a&&a.unsaved,{hash:{},inverse:r.noop,fn:r.program(8,j,b),data:b}),(e||0===e)&&(h+=e),h+='" >\r\n                <td>\r\n                    <div style="background-color: ',(f=c.color)?e=f.call(a,{hash:{},data:b}):(f=a&&a.color,e=typeof f===p?f.call(a,{hash:{},data:b}):f),h+=q(e)+'; width:18px; height:18px;"></div>\r\n                </td>\r\n                ',e=c["if"].call(a,a&&a.showId,{hash:{},inverse:r.noop,fn:r.program(10,k,b),data:b}),(e||0===e)&&(h+=e),h+="\r\n                <td>\r\n                    "+q((f=c.formatDate||a&&a.formatDate,g={hash:{},data:b},f?f.call(a,a&&a.year,a&&a.month,a&&a.day,g):s.call(a,"formatDate",a&&a.year,a&&a.month,a&&a.day,g)))+"\r\n                </td>\r\n                <td>\r\n                    "+q((e=a&&a.timeFrom,typeof e===p?e.apply(a):e))+" - "+q((e=a&&a.timeTo,typeof e===p?e.apply(a):e))+"\r\n                </td>\r\n                <td>\r\n                    "+q((e=a&&a.personName,typeof e===p?e.apply(a):e))+"\r\n                </td>\r\n                <td>\r\n                    "+q((e=a&&a.eventName,typeof e===p?e.apply(a):e))+"\r\n                </td>\r\n                ",e=c["if"].call(a,d&&d.useIcons,{hash:{},inverse:r.program(14,m,b),fn:r.program(12,l,b),data:b}),(e||0===e)&&(h+=e),h+="\r\n            </tr>\r\n            "}function j(){return"warning"}function k(a){var b,c="";return c+="\r\n                <td>\r\n                    "+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+"\r\n                </td>\r\n                "}function l(a){var b,c="";return c+='\r\n                <td>\r\n                    <a href="#" class="edit-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'"><span class="glyphicon glyphicon-pencil"></span></a>\r\n                    <a href="#" class="remove-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'"><span class="glyphicon glyphicon-remove"></span></a>\r\n                </td>\r\n                '}function m(a){var b,c="";return c+='\r\n                <td>\r\n                    <a href="#" class="edit-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'">'+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.EDIT,typeof b===p?b.apply(a):b))+'</a>\r\n                </td>\r\n                <td>\r\n                    <a href="#" class="remove-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'">'+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.REMOVE,typeof b===p?b.apply(a):b))+"</a>\r\n                </td>\r\n                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o="",p="function",q=this.escapeExpression,r=this,s=c.helperMissing;return o+='<div class="event-list ">\r\n  <hr />\r\n    <h3>'+q((n=b&&b.RESOURCES,n=null==n||n===!1?n:n.EVENT_LIST,typeof n===p?n.apply(b):n))+'</h3>\r\n    <table class="table  table-hover table-striped table-responsive">\r\n        <thead>\r\n            <tr>\r\n                <th>#</th>\r\n                ',n=c["if"].call(b,b&&b.showId,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(n||0===n)&&(o+=n),o+="\r\n                <th>\r\n                    "+q((n=b&&b.RESOURCES,n=null==n||n===!1?n:n.DATE,typeof n===p?n.apply(b):n))+"\r\n                </th>\r\n                <th>\r\n                    "+q((n=b&&b.RESOURCES,n=null==n||n===!1?n:n.TIME,typeof n===p?n.apply(b):n))+"\r\n                </th>\r\n                <th>\r\n                    ",n=b&&b.RESOURCES,n=null==n||n===!1?n:n.HEADER_PERSON_NAME,n=typeof n===p?n.apply(b):n,(n||0===n)&&(o+=n),o+="\r\n                </th>\r\n                <th>\r\n                    ",n=b&&b.RESOURCES,n=null==n||n===!1?n:n.HEADER_EVENT_NAME,n=typeof n===p?n.apply(b):n,(n||0===n)&&(o+=n),o+="\r\n                </th>\r\n                ",n=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:r.program(5,h,e),fn:r.program(3,g,e),data:e}),(n||0===n)&&(o+=n),o+="\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ",n=c.each.call(b,b&&b.events,{hash:{},inverse:r.noop,fn:r.programWithDepth(7,i,e,b),data:e}),(n||0===n)&&(o+=n),o+="\r\n        </tbody>\r\n    </table>\r\n</div>"}),this.CalendarTemplates.navpanel=Handlebars.template(function(a,b,c,d,e){function f(){return'<span class="glyphicon glyphicon-plus"></span>'}function g(){return'<span class="glyphicon glyphicon-pencil"></span>'}function h(){return'<span class="glyphicon glyphicon-remove"></span>'}function i(a){var b,c="";return c+='\r\n        <button class="btn btn-primary save-events" style="margin-right:10px;">'+o((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.SAVE_EVENTS,typeof b===n?b.apply(a):b))+'</button>\r\n        <label for="event-autosave">'+o((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.AUTOSAVE,typeof b===n?b.apply(a):b))+'</label>\r\n        <input type="checkbox" id="event-autosave" class="event-autosave" />\r\n        '}function j(){return'\r\n        <ul class="pagination">\r\n            <li><button class="btn btn-nav btn-default prev-year"><span class="glyphicon glyphicon-fast-backward"></span></button></li>\r\n            <li><button class="btn btn-nav btn-default prev-year"><span class="glyphicon glyphicon-backward"></span></button></li>\r\n            <li><button class="btn btn-nav btn-default prev-year"><span class="glyphicon glyphicon-forward"></span></button></li>\r\n            <li><button class="btn btn-nav btn-default prev-year"><span class="glyphicon glyphicon-fast-forward"></span></button></li>\r\n        </ul>\r\n        '}function k(a,b){var d,e,f="";return f+='\r\n        <button class="btn btn-nav btn-default prev-year btn-lg"><<</button>\r\n        <button class="btn btn-nav btn-default prev-month btn-lg"><</button>\r\n\r\n        <h2 style="display:inline-block; padding: 0 0; margin: 0 0;">\r\n            <span class="label label-primary label-lg currentYearMonth">',(e=c.currentYearMonth)?d=e.call(a,{hash:{},data:b}):(e=a&&a.currentYearMonth,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'</span>\r\n        </h2>\r\n\r\n        <button class="btn btn-nav btn-default next-month btn-lg">></button>\r\n        <button class="btn btn-nav btn-default next-year btn-lg">>></button>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m="",n="function",o=this.escapeExpression,p=this;return m+='<div class="calendar-panel calendar-nav-panel ">\r\n    <div class="pull-left">\r\n        <button class="btn btn-primary panel-add-event" style="display:none">',l=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e}),(l||0===l)&&(m+=l),m+=o((l=b&&b.RESOURCES,l=null==l||l===!1?l:l.ADD_EVENT,typeof l===n?l.apply(b):l))+'</button>\r\n        <button class="btn btn-primary panel-edit-event" style="display:none">',l=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e}),(l||0===l)&&(m+=l),m+=o((l=b&&b.RESOURCES,l=null==l||l===!1?l:l.EDIT_EVENT,typeof l===n?l.apply(b):l))+'</button>\r\n        <button class="btn btn-primary panel-remove-event" style="display:none">',l=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e}),(l||0===l)&&(m+=l),m+=o((l=b&&b.RESOURCES,l=null==l||l===!1?l:l.REMOVE_EVENT,typeof l===n?l.apply(b):l))+"</button>\r\n\r\n        ",l=c["if"].call(b,b&&b.autosave,{hash:{},inverse:p.noop,fn:p.program(7,i,e),data:e}),(l||0===l)&&(m+=l),m+='\r\n    </div>\r\n    <div class="pull-right">\r\n        ',l=c["if"].call(b,b&&b.navAltVersion,{hash:{},inverse:p.program(11,k,e),fn:p.program(9,j,e),data:e}),(l||0===l)&&(m+=l),m+='\r\n    </div>\r\n\r\n    <div style="clear:both;"></div>\r\n</div>\r\n'}),this.CalendarTemplates.selectPartial=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n        <option value="',(e=c.personId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.personId,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'">',(e=c.personName)?d=e.call(a,{hash:{},data:b}):(e=a&&a.personName,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"</option>\r\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<select class="person form-control">\r\n    ',g=c.each.call(b,b&&b.people,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\r\n</select>"}),function(a){var b=function(b){var c={CALENDAR:"Calendar",MODAL_TITLE_ADD:"Adding event for date",MODAL_TITLE_EDIT:"Editing event for date",MODAL_BODY:"Please enter attendee's and event's name:",PERSON_NAME:"Attendee",EVENT_NAME:"Event",ADD_EVENT:"Add event",EDIT_EVENT:"Edit event",REMOVE_EVENT:"Remove event",CLOSE:"Close",ADD:"Add",EDIT:"Edit",PREVIOUS_YEAR:"Previous year",AUTOSAVE:"Autosave",NEXT_YEAR:"Next year",PREVIOUS_MONTH:"Previous month",NEXT_MONTH:"Next month",SAVE_EVENTS:"Save events",CLEAR_EVENTS:"Clear events",REMOVE:"Remove",TIME_FROM:"Time from",TIME_TO:"Time to",DATE:"Date",TIME:"Time",ACTIONS:"Actions",HEADER_EVENT_NAME:"Event name",HEADER_PERSON_NAME:"Person name",ID:"Id",EVENT_LIST:"Event list"},d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],e={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},f=null,g=!1,h="localStorage",i=void 0,j=null,k=null,l=!0,m=void 0,n="top",o="",p=!0,q="#calendarEventModal",r=!1,s=!0,t=!1,u=!1,v=!0,w=function(){return void 0!=localStorage?(this.saveAllEvents=function(){if(C instanceof Object){for(var a=[],b=0;b<C.length;b++){var c=C[b],d={};jQuery.extend(d,c),d.container=void 0,a.push(d)}var e=JSON.stringify(a);localStorage.setItem("events",e)}else localStorage.removeItem("events")},this.readAllEvents=function(){var a=localStorage.getItem("events");try{if(void 0==a||void 0==a)throw new Error("temp is undefined");for(var b=JSON.parse(a),c=0;c<b.length;c++){var d=b[c];X(d,!1)}}catch(e){C=new y}},this.clearAllEvents=function(){C=new y,localStorage.removeItem("events")},this):void 0},x=function(){var a="ready";$(".calendar-loader").hide();var b=function(b){switch(a=b,b){case"load":$(".calendar-loader").fadeIn(250);break;case"idle":case"ready":$(".calendar-loader").fadeOut(500)}};this.urls={getAllEvents:""},this.setUrls=function(a){this.urls=a},this.getUrls=function(){return this.urls};var c=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.unsaved=!1}};return this.saveData=function(){var a={eventsToAdd:z,eventsToRemove:A,eventsToEdit:B},d=JSON.stringify(a);b("load"),$.ajax({type:"POST",url:this.urls.saveData,contentType:"application/json",data:d,success:function(){console.log("saved"),ib("Events have been saved","success"),c(B),c(z),ab(!1),hb()},error:function(a){ib("There was an error while trying to save events","danger"),console.log(a)},complete:function(){b("idle")}})},this.saveAllEvents=function(){this.saveData()},this.readAllPeople=function(a){void 0==a&&(a=!1),void 0!=this.urls.getPeople&&(b("load"),$.ajax({type:"GET",url:this.urls.getPeople,success:function(a){lb(a)},complete:function(){b("idle")}}))},this.readAllEvents=function(a,c){void 0==a&&(a=!1),b("load"),$.ajax({type:"GET",url:this.urls.getEvents,success:function(b){if(void 0!=b&&null!=b)for(var d=0;d<b.length;d++){var e=b[d];e.month-=1,X(e,!1)}a&&void 0!=c&&c(),fb()},error:function(a){console.log(a)},complete:function(){b("idle")}})},this.clearAllEvents=function(){console.log("This function is not supported")},this},y=function(){return new Array},z=[],A=[],B=[],C=[],D=[],E=function(a,b,c){var d=b+1;return 10>d&&(d="0"+d),void 0!=c?(10>c&&(c="0"+c),a+"-"+d+"-"+c):void 0!=a&&void 0!=b?a+" - "+d:""},F=function(a,b){return H(b,!0)+" "+a},G=function(a){return a.length>20?a.substring(0,18)+"...":a},H=function(a,b){b&&a++;var c=String(a);return e[c]},I=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],J=function(){for(var a="#",b=0;6>b;b++){var c=Math.round(Math.random()*(I.length-1));a+=I[c]}return a},K=function(a,b,c){return b+=1,10>b&&(b="0"+b),10>c&&(c="0"+c),a+"-"+b+"-"+c},L=function(){m=CalendarTemplates,Handlebars.registerPartial("selectPartial",m.selectPartial),Handlebars.registerHelper("formatDate",E),Handlebars.registerHelper("formatEventName",G)},M=function(){L();var c=b,d="Calendar cannot be initialized. Dependency required: ";if(void 0==a.Handlebars)throw new Error(d+"Handlebars.js");if(void 0==a.jQuery)throw new Error(d+"jQuery.js");var e=!1;if("string"==typeof c)f=c;else{if("object"!=typeof c)throw new Error("Invalid options");if(f=c.selector,void 0!=c.debug&&(g=c.debug),void 0!=c.sync){var m={};if("string"==typeof c.sync?h=c.sync:"object"==typeof c.sync&&(void 0!=c.sync.type&&(h=c.sync.type),m.getEvents=c.sync.getEvents,m.saveData=c.sync.saveData,m.getPeople=c.sync.getPeople),"localStorage"!=h&&"remote"!=h)throw new Error("Invalid sync type");switch(h){case"localStorage":i=new w;break;case"remote":i=new x,i.setUrls(m),i.readAllPeople(),e=!0;break;default:i=void 0}void 0!=i.readAllEvents&&i.readAllEvents(e)}void 0!=c.showEventList&&(1==c.showEventList||0==c.showEventList)&&(p=c.showEventList);var o=function(a){return a=!1};r=o(c.autosave),t=o(c.navAltVersion),_tabbedEventsList=o(c.tabbedEventList)}if(void 0==f||null==f)throw new Error("Invalid selector");if(g)for(var q=0;12>q;q++)for(var s=1;31>=s;s++)for(var u=0;1>u;u++)W(2014,q,s,1,"Jan Kowalski","Swimming",void 0,q*s*u);if(void 0==c.year||void 0==c.month&&"number"!=typeof c.year||"number"!=typeof c.month){var v=new Date;j=v.getFullYear(),k=v.getMonth()}else eb(c.year,c.month);void 0==c.panel||"bottom"!=c.panel&&"top"!=c.panel||(n=c.panel),N(),O(),P(n),T(),V(),void 0!=c.render&&(l=c.render),l&&fb()},N=function(){var a={RESOURCES:c,tabbedEventList:u},b=m.calendarContainer(a);$(f).append(b),o=".calendar-container"},O=function(){var a={add:!0,RESOURCES:c,enable_dropdown:!0,people:D},b=m.eventModal(a);$("body").append(b)},P=function(a){var b=j+" - "+(k+1),d={currentYearMonth:b,useIcons:s,autosave:r,RESOURCES:c},e=m.navpanel(d);"bottom"==a?$(f+" .calendar-panel-bottom").html(e):$(f+" .calendar-panel-top").html(e)},Q=function(){if(r)return!0;var a=$(".calendar-panel .event-autosave");return void 0!=a&&a.length>0?a[0].checked:!1},R=function(a,b){var c=K(b.year,b.month,b.day);a.find(".modalTitleDate").html(c),a.find(".eventDay").val(b.day),a.find(".eventId").val(b.eventId),a.find(".person").val(b.personId),a.find(".timeFrom").val(b.timeFrom),a.find(".timeTo").val(b.timeTo);var d=a.find(".eventName");d.attr("value",b.eventName)},S=function(a,b){var c=a.find(".add-event"),d=a.find(".edit-event");c.hide(),d.hide(),"edit"==b?d.show():c.show()},T=function(){var a=".calendar-panel ";$(a+".prev-month").click(function(){k--,0>k&&(k=11,j--),fb()}),$(a+".next-month").click(function(){k++,k>11&&(k=0,j++),fb()});var b=function(a){j+=a,fb()};$(a+".prev-year").click(function(){b(-1)}),$(a+".next-year").click(function(){b(1)});var c=function(a){var b=$(q),c=b.find(".person"),d=b.find(".eventName"),e=c.val(),f=b.find(".person option:selected").text(),g=b.find(".timeFrom"),h=b.find(".timeTo"),i=d.val();return void 0!=i&&""!=i?(W(j,k,a,e,f,i,void 0,g.val(),h.val()),fb(),c.val(""),d.val(""),!0):!1},d=function(a,b){return b.eventId=a.find(".eventId").val(),b.personId=a.find(".person").val(),b.personName=a.find(".person option:selected").text(),b.timeFrom=a.find(".timeFrom").val(),b.timeTo=a.find(".timeTo").val(),b.eventName=a.find(".eventName").val(),b.unsaved=!0,B.push(b),Q()&&_(),!0};$(f).on("click",".panel-add-event",function(){var a=$(q),b=$(f).find(".week-day-div.selected");if(b.length>0){var c=$(b).parent().data("day"),d=j+"-"+k+"-"+c,e=a.find(".modalTitleDate");e.html(d);var g=a.find(".eventDay");g.val(c),S(a,"add"),a.modal("show")}}),$(f).on("click",".panel-edit-event",function(){var a=$(q),b=$(f).find(".event.selected");if(b.length>0){var c=($(b).data("day"),$(b).data("eventid")),d=Y(c);null!=d&&(R(a,d),S(a,"edit"),a.modal("show"))}}),$(f).on("click",".panel-remove-event",function(){var a=$(f).find(".event.selected");if(a.length>0){var b=($(a).data("day"),$(a).data("eventid"));void 0!=b&&(Z(b),fb())}}),$(f).on("click",".week-day-div",function(){var a=$(this).hasClass("selected");a?U("none"):(U("add"),$(this).addClass("selected"))}),$(f).on("click",".event",function(a){a.stopPropagation();var b=$(this).hasClass("selected");b?U("none"):(U("edit"),$(this).addClass("selected"))}),$(q+" .add-event").click(function(){var a=$(q+" .eventDay").val(),b=c(a);if(b){var d=$(q);d.modal("hide"),U("none")}}),$(q+" .edit-event").click(function(){var a=$(q),b=a.find(".eventId").val(),c=Y(b);if(null!=c){var e=d(a,c);e&&(a.modal("hide"),U("none"),fb())}}),$(a+".save-events").click(function(){_()}),$(a+".clear-events").click(function(){ab(!0),fb()}),$(a+".reload-events").click(function(){ab(!0),i.readAll(!0,function(){fb()})}),$(a+".load-people").click(function(){void 0!=i.readAllPeople&&i.readAllPeople(!0)})},U=function(a){var b=$(f+" .btn.panel-add-event"),c=$(f+" .btn.panel-edit-event"),d=$(f+" .btn.panel-remove-event");b.hide(),c.hide(),d.hide(),$(f+" .event").removeClass("selected"),$(f+" .week-day-div").removeClass("selected"),"add"==a?b.show():"edit"==a&&(c.show(),d.show())},V=function(){$(".event-container").on("click",".edit-event2",function(){var a=$(this).data("eventid"),b=Y(a),c=$("#calendarEventModal");return null!=b&&(R(c,b),S(c,"edit"),c.modal("show")),!1}),$(".event-container").on("click",".remove-event2",function(){var a=$(this).data("eventid");return void 0!=a&&(Z(a),fb()),!1})},W=function(a,b,c,d,e,f,g,h,i,j){void 0==g&&(g=J()),void 0==j&&(j="t_"+(new Date).getTime());var k={eventId:j,personId:d,personName:e,eventName:f,color:g,unsaved:!0,year:a,month:b,day:c,timeFrom:h,timeTo:i};X(k,!0),Q()&&_()},X=function(a,b){void 0==b&&(b=!1),"object"==typeof a&&(b&&(a.unsaved=!0,z.push(a)),C.push(a))},Y=function(a){for(var b=0;b<C.length;b++){var c=C[b];if(c.eventId==a)return c}return null},Z=function(a){for(var b=null,c=0;c<C.length;c++)if(C[c].eventId==a){b=C[c];break}if(null!=b){var d=C.indexOf(b);-1!=d&&(A.push(b),C.splice(d,1))}Q()&&_()},_=function(){void 0!=i&&i.saveAllEvents()},ab=function(a){void 0==a&&(a=!0),a&&(C=new y),z=new y,A=new y,B=new y},bb=function(a,b,c){for(var d=[],e=0;e<C.length;e++){var f=C[e];f.year==a&&f.month==b&&f.day==c&&d.push(f)}return d},cb=function(a,b){for(var c=[],d=0;d<C.length;d++){var e=C[d];e.year==a&&e.month==b&&c.push(e)}return c},db=function(a,b){var c=new Date,d=c.getFullYear(),e=c.getMonth(),f=c.getDate(),g=new Date(a,b),h=(g.getMonth(),[]),i={days:[]},j=0,k=function(a){j++,i.days.push(a)},l=function(){h.push(i),i={days:[]}},m=new Date(g);m.setDate(m.getDate()-1);for(var n=m.getDay(),o=0;n>o;o++)k({});var p=g.getDate();do{j%7==0&&l(i);var q={date_string:K(a,b,p),bg_color:"#DEDEDE",dayValue:p};a==d&&b==e&&p==f&&(q.current=!0);var r=bb(a,b,p);q.events=r,k(q),p++,g=new Date(a,b,p),p=g.getDate()}while(p>1);return i.days.length>0&&l(i),h},eb=function(a,b){j=a,k=b},fb=function(a,b,c){void 0!=a&&void 0!=b&&eb(a,b),void 0==c&&(c=["calendar","events"]),gb(),hb();var d=F(j,k);$(".calendar-panel .currentYearMonth").html(d),-1!=c.indexOf("calendar"),c.indexOf("events")-1},gb=function(){var a=$(o),b=j;b+=9>k?" 0"+(k+1):" "+(k+1);var c=db(j,k),e={weekdays:d,weeks:c},f=m.calendar(e);a.html(f)},hb=function(){if(p){var a=null;a=v?cb(j,k):C;var b={events:a,useIcons:s,showId:!1,RESOURCES:c},d=m.events(b);$(f+" .event-container").html(a.length>0?d:"")}},ib=function(a,b){void 0==b&&(b="success");var c={alertType:b,alertMessage:a},d=m.alert(c);$(f+" .calendar-alertarea").html(d)},jb=function(a){if(7!=a.length)throw new Error("Array should have 7 elements");d=a},kb=function(a){if(12!=Object.keys(a).length)throw new Error("Object should have 12 elements");e=a},lb=function(a){D=a;var b={people:D},c=m.selectPartial(b);$(q+" .person").replaceWith(c)},mb=function(a,b){if(void 0!=a&&null!=a&&"Object"==typeof a)for(var d in a)c[d]=a[d];b&&fb()};return M(),{render:fb,addEvent:W,removeEvent:Z,getEvents:function(){return C},saveEvents:_,clearEvents:ab,loadWeekStrings:jb,loadMonthStrings:kb,setPeople:lb,loadResources:mb}};a.Calendar=b}(window);