this.CalendarTemplates=this.CalendarTemplates||{},this.CalendarTemplates.alert=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="alert alert-',(g=c.alertType)?f=g.call(b,{hash:{},data:e}):(g=b&&b.alertType,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' alert-dismissible" role="alert">\r\n    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\r\n    ',(g=c.alertMessage)?f=g.call(b,{hash:{},data:e}):(g=b&&b.alertMessage,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"\r\n</div>"}),this.CalendarTemplates.calendar=Handlebars.template(function(a,b,c,d,e){function f(a){var b="";return b+="\r\n            <th>\r\n                "+o(typeof a===n?a.apply(a):a)+"\r\n            </th>\r\n            "}function g(a,b){var d,e="";return e+='\r\n    <tr class="week">\r\n        ',d=c.each.call(a,a&&a.days,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\r\n    </tr>\r\n    "}function h(a,b){var d,e,f="";return f+='\r\n        <td class="',d=c["if"].call(a,a&&a.date_string,{hash:{},inverse:q.noop,fn:q.program(5,i,b),data:b}),(d||0===d)&&(f+=d),f+='" data-day="',(e=c.dayValue)?d=e.call(a,{hash:{},data:b}):(e=a&&a.dayValue,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'">\r\n            <div class="week-day-div ',d=c["if"].call(a,a&&a.current,{hash:{},inverse:q.noop,fn:q.program(7,j,b),data:b}),(d||0===d)&&(f+=d),f+='">\r\n                <ul style="list-style:none;">\r\n                    <li><span class="date ">',(e=c.date_string)?d=e.call(a,{hash:{},data:b}):(e=a&&a.date_string,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+"</span></li>\r\n                    ",d=c.each.call(a,a&&a.events,{hash:{},inverse:q.noop,fn:q.programWithDepth(9,k,b,a),data:b}),(d||0===d)&&(f+=d),f+="\r\n                </ul>\r\n            </div>\r\n        </td>\r\n        "}function i(){return" week-day "}function j(){return" current "}function k(a,b,d){var e,f,g,h="";return h+='\r\n                    <li>\r\n                        <span class="event" data-day="'+o((e=d&&d.dayValue,typeof e===n?e.apply(a):e))+'" data-eventid="',(f=c.eventId)?e=f.call(a,{hash:{},data:b}):(f=a&&a.eventId,e=typeof f===n?f.call(a,{hash:{},data:b}):f),h+=o(e)+'" style="background-color:'+o((e=a&&a.color,typeof e===n?e.apply(a):e))+'">\r\n                            <span> ('+o((f=c.formatTime||a&&a.formatTime,g={hash:{},data:b},f?f.call(a,a&&a.timeFrom,g):p.call(a,"formatTime",a&&a.timeFrom,g)))+" - "+o((f=c.formatTime||a&&a.formatTime,g={hash:{},data:b},f?f.call(a,a&&a.timeTo,g):p.call(a,"formatTime",a&&a.timeTo,g)))+") <br/> "+o((e=a&&a.personName,typeof e===n?e.apply(a):e))+" - "+o((f=c.formatEventName||a&&a.formatEventName,g={hash:{},data:b},f?f.call(a,a&&a.eventName,g):p.call(a,"formatEventName",a&&a.eventName,g)))+"</span>\r\n                        </span>\r\n                    </li>\r\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m="",n="function",o=this.escapeExpression,p=c.helperMissing,q=this;return m+='\r\n<table class="table calendar">\r\n    <thead>\r\n        <tr>\r\n            ',l=c.each.call(b,b&&b.weekdays,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(l||0===l)&&(m+=l),m+="\r\n        </tr>\r\n    </thead>\r\n    ",l=c.each.call(b,b&&b.weeks,{hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e}),(l||0===l)&&(m+=l),m+="\r\n\r\n</table>"}),this.CalendarTemplates.calendarContainer=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+='\r\n\r\n<ul class="nav nav-tabs nav-calendar">\r\n    <li class="active"><a id="calendar-tab-btn" href="#calendar-tab" data-toggle="tab">'+k((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.CALENDAR,typeof b===j?b.apply(a):b))+'</a></li>\r\n    <li><a id="event-tab-btn" href="#events-tab" data-toggle="tab">'+k((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.EVENT_LIST,typeof b===j?b.apply(a):b))+'</a></li>\r\n</ul>\r\n\r\n<div class="tab-content">\r\n    <div class="tab-pane active" id="calendar-tab">\r\n        <div class="calendar-container"></div>\r\n    </div>\r\n    <div class="tab-pane" id="events-tab">\r\n        <div class="event-container"></div>\r\n    </div>\r\n</div>\r\n\r\n'}function g(){return'\r\n<div class="calendar-container"></div>\r\n<hr />\r\n<div class="event-container"></div>\r\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="calendar-alertarea"></div>\r\n<div class="calendar-panel calendar-panel-top"></div>\r\n',h=c["if"].call(b,b&&b.tabbedEventList,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\r\n\r\n<div class="calendar-panel calendar-panel-bottom"></div>\r\n\r\n<div class="calendar-loader"></div> '}),this.CalendarTemplates.eventList=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\r\n                <th>\r\n                    "+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.ID,typeof b===p?b.apply(a):b))+"\r\n                </th>\r\n                "}function g(a){var b,c="";return c+="\r\n                <th>\r\n                    "+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.ACTIONS,typeof b===p?b.apply(a):b))+"\r\n                </th>\r\n                "}function h(){return"\r\n                <th></th>\r\n                <th></th>\r\n                "}function i(a,b,d){var e,f,g,h="";return h+='\r\n            <tr class="',e=c["if"].call(a,a&&a.unsaved,{hash:{},inverse:r.noop,fn:r.program(8,j,b),data:b}),(e||0===e)&&(h+=e),h+='" >\r\n                <td>\r\n                    <div style="background-color: ',(f=c.color)?e=f.call(a,{hash:{},data:b}):(f=a&&a.color,e=typeof f===p?f.call(a,{hash:{},data:b}):f),h+=q(e)+'; width:18px; height:18px;"></div>\r\n                </td>\r\n                ',e=c["if"].call(a,a&&a.showId,{hash:{},inverse:r.noop,fn:r.program(10,k,b),data:b}),(e||0===e)&&(h+=e),h+="\r\n                <td>\r\n                    "+q((f=c.formatDate||a&&a.formatDate,g={hash:{},data:b},f?f.call(a,a&&a.year,a&&a.month,a&&a.day,g):s.call(a,"formatDate",a&&a.year,a&&a.month,a&&a.day,g)))+"\r\n                </td>\r\n                <td>\r\n                    "+q((f=c.formatTime||a&&a.formatTime,g={hash:{},data:b},f?f.call(a,a&&a.timeFrom,g):s.call(a,"formatTime",a&&a.timeFrom,g)))+" - "+q((f=c.formatTime||a&&a.formatTime,g={hash:{},data:b},f?f.call(a,a&&a.timeTo,g):s.call(a,"formatTime",a&&a.timeTo,g)))+"\r\n                </td>\r\n                <td>\r\n                    "+q((e=a&&a.personName,typeof e===p?e.apply(a):e))+"\r\n                </td>\r\n                <td>\r\n                    "+q((e=a&&a.eventName,typeof e===p?e.apply(a):e))+"\r\n                </td>\r\n                ",e=c["if"].call(a,d&&d.useIcons,{hash:{},inverse:r.program(14,m,b),fn:r.program(12,l,b),data:b}),(e||0===e)&&(h+=e),h+="\r\n            </tr>\r\n            "}function j(){return"warning"}function k(a){var b,c="";return c+="\r\n                <td>\r\n                    "+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+"\r\n                </td>\r\n                "}function l(a){var b,c="";return c+='\r\n                <td>\r\n                    <a href="#" class="edit-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'"><span class="glyphicon glyphicon-pencil"></span></a>\r\n                    <a href="#" class="remove-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'"><span class="glyphicon glyphicon-remove"></span></a>\r\n                </td>\r\n                '}function m(a){var b,c="";return c+='\r\n                <td>\r\n                    <a href="#" class="edit-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'">'+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.EDIT,typeof b===p?b.apply(a):b))+'</a>\r\n                </td>\r\n                <td>\r\n                    <a href="#" class="remove-event2" data-eventid="'+q((b=a&&a.eventId,typeof b===p?b.apply(a):b))+'">'+q((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.REMOVE,typeof b===p?b.apply(a):b))+"</a>\r\n                </td>\r\n                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o="",p="function",q=this.escapeExpression,r=this,s=c.helperMissing;return o+='<div class="event-list">\r\n    <h3>'+q((n=b&&b.RESOURCES,n=null==n||n===!1?n:n.EVENT_LIST,typeof n===p?n.apply(b):n))+'</h3>\r\n    <table class="table  table-hover table-striped table-responsive">\r\n        <thead>\r\n            <tr>\r\n                <th>#</th>\r\n                ',n=c["if"].call(b,b&&b.showId,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(n||0===n)&&(o+=n),o+="\r\n                <th>\r\n                    "+q((n=b&&b.RESOURCES,n=null==n||n===!1?n:n.DATE,typeof n===p?n.apply(b):n))+"\r\n                </th>\r\n                <th>\r\n                    "+q((n=b&&b.RESOURCES,n=null==n||n===!1?n:n.TIME,typeof n===p?n.apply(b):n))+"\r\n                </th>\r\n                <th>\r\n                    ",n=b&&b.RESOURCES,n=null==n||n===!1?n:n.HEADER_PERSON_NAME,n=typeof n===p?n.apply(b):n,(n||0===n)&&(o+=n),o+="\r\n                </th>\r\n                <th>\r\n                    ",n=b&&b.RESOURCES,n=null==n||n===!1?n:n.HEADER_EVENT_NAME,n=typeof n===p?n.apply(b):n,(n||0===n)&&(o+=n),o+="\r\n                </th>\r\n                ",n=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:r.program(5,h,e),fn:r.program(3,g,e),data:e}),(n||0===n)&&(o+=n),o+="\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            ",n=c.each.call(b,b&&b.events,{hash:{},inverse:r.noop,fn:r.programWithDepth(7,i,e,b),data:e}),(n||0===n)&&(o+=n),o+="\r\n        </tbody>\r\n    </table>\r\n</div>"}),this.CalendarTemplates.eventModal=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\r\n                            <b>"+n((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.PERSON_NAME,typeof b===m?b.apply(a):b))+":</b>\r\n                        "}function g(a){var b,c="";return c+="\r\n                            <span>"+n((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.PERSON_NAME,typeof b===m?b.apply(a):b))+":</span>\r\n                        "}function h(a,b){var e,f="";return f+="\r\n                            ",e=o.invokePartial(d.selectPartial,"selectPartial",a,c,d,b),(e||0===e)&&(f+=e),f+="\r\n                        "}function i(){return'\r\n                            <input class="personId form-control"> \r\n                        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this;return l+='<div id="calendarEventModal" class="modal fade">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">'+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.CLOSE,typeof j===m?j.apply(b):j))+'</span></button>\r\n                <h4 class="modal-title">'+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.MODAL_TITLE,typeof j===m?j.apply(b):j))+' <span class="modalTitleDate"></span></h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <p>'+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.MODAL_BODY,typeof j===m?j.apply(b):j))+'</p>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        ',j=c["if"].call(b,b&&b.enable_dropdown,{hash:{},inverse:o.program(3,g,e),fn:o.program(1,f,e),data:e}),(j||0===j)&&(l+=j),l+='\r\n                    </div>\r\n                    <div class="col-md-7 col-lg-7">\r\n                        ',j=c["if"].call(b,b&&b.enable_dropdown,{hash:{},inverse:o.program(7,i,e),fn:o.program(5,h,e),data:e}),(j||0===j)&&(l+=j),l+='\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        <b>'+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.EVENT_NAME,typeof j===m?j.apply(b):j))+':</b>\r\n                    </div>  \r\n                    <div class="col-md-7 col-lg-7">\r\n                        <textarea maxlength="500" rows="4" class="eventName form-control" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        <b>\r\n                            '+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.TIME_FROM,typeof j===m?j.apply(b):j))+':\r\n                        </b>\r\n                    </div>\r\n                    <div class="col-md-7 col-lg-7">\r\n                        <input type="range" class="timeFrom" name="timeFrom"  min="0" max="',(k=c.timeMaxValue)?j=k.call(b,{hash:{},data:e}):(k=b&&b.timeMaxValue,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" value="',(k=c.timeFromDefault)?j=k.call(b,{hash:{},data:e}):(k=b&&b.timeFromDefault,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'">\r\n                        <div class="timeFrom-output"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row row-mar">\r\n                    <div class="col-md-5 col-lg-5">\r\n                        <b>\r\n                            '+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.TIME_TO,typeof j===m?j.apply(b):j))+':\r\n                        </b>\r\n                    </div>\r\n\r\n                    <div class="col-md-7 col-lg-7">\r\n                        <input type="range" class="timeTo" name="timeTo" min="0" max="',(k=c.timeMaxValue)?j=k.call(b,{hash:{},data:e}):(k=b&&b.timeMaxValue,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'" value="',(k=c.timeToDefault)?j=k.call(b,{hash:{},data:e}):(k=b&&b.timeToDefault,j=typeof k===m?k.call(b,{hash:{},data:e}):k),l+=n(j)+'">\r\n                        <div class="timeTo-output"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <input type="hidden" class="eventId" />\r\n                <input type="hidden" class="eventDay" />\r\n\r\n                <div style="clear:both"></div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary add-event">'+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.ADD,typeof j===m?j.apply(b):j))+'</button>\r\n                <button type="button" class="btn btn-primary edit-event">'+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.EDIT,typeof j===m?j.apply(b):j))+'</button>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">'+n((j=b&&b.RESOURCES,j=null==j||j===!1?j:j.CLOSE,typeof j===m?j.apply(b):j))+"</button>\r\n            </div>\r\n        </div><!-- /.modal-content -->\r\n    </div><!-- /.modal-dialog -->\r\n</div><!-- /.modal -->\r\n"}),this.CalendarTemplates.navpanel=Handlebars.template(function(a,b,c,d,e){function f(){return'<span class="glyphicon glyphicon-plus"></span>'}function g(){return'<span class="glyphicon glyphicon-pencil"></span>'}function h(){return'<span class="glyphicon glyphicon-remove"></span>'}function i(a){var b,c="";return c+='\r\n        <button class="btn btn-primary save-events" style="margin-right:10px;">'+o((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.SAVE_EVENTS,typeof b===n?b.apply(a):b))+'</button>\r\n        <label for="event-autosave">'+o((b=a&&a.RESOURCES,b=null==b||b===!1?b:b.AUTOSAVE,typeof b===n?b.apply(a):b))+'</label>\r\n        <input type="checkbox" id="event-autosave" class="event-autosave" />\r\n        '}function j(a,b){var d,e,f="";return f+='\r\n        <button class="btn btn-nav btn-default prev-year btn-lg" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.PREVIOUS_YEAR,typeof d===n?d.apply(a):d))+'"><<</button>\r\n        <button class="btn btn-nav btn-default prev-month btn-lg" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.PREVIOUS_MONTH,typeof d===n?d.apply(a):d))+'"><</button>\r\n\r\n        <h2 style="display:inline-block; padding: 0 0; margin: 0 0;">\r\n            <span class="label label-primary label-lg currentYearMonth">',(e=c.currentYearMonth)?d=e.call(a,{hash:{},data:b}):(e=a&&a.currentYearMonth,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'</span>\r\n        </h2>\r\n\r\n        <button class="btn btn-nav btn-default next-month btn-lg" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.NEXT_MONTH,typeof d===n?d.apply(a):d))+'">></button>\r\n        <button class="btn btn-nav btn-default next-year btn-lg" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.NEXT_YEAR,typeof d===n?d.apply(a):d))+'">>></button>\r\n        '}function k(a,b){var d,e,f="";return f+='\r\n        <ul class="pagination pagination">\r\n            <li><a class="prev-year" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.PREVIOUS_YEAR,typeof d===n?d.apply(a):d))+'"><span class="glyphicon glyphicon-fast-backward"></span></a></li>\r\n            <li><a class="prev-month" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.PREVIOUS_MONTH,typeof d===n?d.apply(a):d))+'"><span class="glyphicon glyphicon-backward"></span></a></li>\r\n            <li class="disabled"><span class="label label-date label-default currentYearMonth">',(e=c.currentYearMonth)?d=e.call(a,{hash:{},data:b}):(e=a&&a.currentYearMonth,d=typeof e===n?e.call(a,{hash:{},data:b}):e),f+=o(d)+'</span></li>\r\n            <li><a class="next-month" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.NEXT_MONTH,typeof d===n?d.apply(a):d))+'"><span class="glyphicon glyphicon-forward"></span></a></li>\r\n            <li><a class="next-year" title="'+o((d=a&&a.RESOURCES,d=null==d||d===!1?d:d.NEXT_YEAR,typeof d===n?d.apply(a):d))+'"><span class="glyphicon glyphicon-fast-forward"></span></a></li>\r\n        </ul>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m="",n="function",o=this.escapeExpression,p=this;return m+='<div class="calendar-panel calendar-nav-panel ">\r\n    <div class="pull-left calendar-buttons">\r\n        <button class="btn btn-primary disabled panel-add-event">',l=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e}),(l||0===l)&&(m+=l),m+=o((l=b&&b.RESOURCES,l=null==l||l===!1?l:l.ADD_EVENT,typeof l===n?l.apply(b):l))+'</button>\r\n        <button class="btn btn-primary disabled panel-edit-event">',l=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e}),(l||0===l)&&(m+=l),m+=o((l=b&&b.RESOURCES,l=null==l||l===!1?l:l.EDIT_EVENT,typeof l===n?l.apply(b):l))+'</button>\r\n        <button class="btn btn-primary disabled panel-remove-event">',l=c["if"].call(b,b&&b.useIcons,{hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e}),(l||0===l)&&(m+=l),m+=o((l=b&&b.RESOURCES,l=null==l||l===!1?l:l.REMOVE_EVENT,typeof l===n?l.apply(b):l))+"</button>\r\n\r\n        ",l=c.unless.call(b,b&&b.autosave,{hash:{},inverse:p.noop,fn:p.program(7,i,e),data:e}),(l||0===l)&&(m+=l),m+='\r\n    </div>\r\n    <div class="pull-right calendar-navigation">\r\n        ',l=c["if"].call(b,b&&b.navAltVersion,{hash:{},inverse:p.program(11,k,e),fn:p.program(9,j,e),data:e}),(l||0===l)&&(m+=l),m+='\r\n    </div>\r\n\r\n    <div style="clear:both;"></div>\r\n</div>\r\n'}),this.CalendarTemplates.selectPartial=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n        <option value="',(e=c.personId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.personId,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'">',(e=c.personName)?d=e.call(a,{hash:{},data:b}):(e=a&&a.personName,d=typeof e===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"</option>\r\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<select class="personId form-control">\r\n    ',g=c.each.call(b,b&&b.people,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\r\n</select>"}),function(a){var b=function(b){var c={CALENDAR:"Calendar",MODAL_TITLE_ADD:"Adding event for date",MODAL_TITLE_EDIT:"Editing event for date",MODAL_BODY:"Please enter attendee's and event's name:",PERSON_NAME:"Attendee",EVENT_NAME:"Event",ADD_EVENT:"Add event",EDIT_EVENT:"Edit event",REMOVE_EVENT:"Remove event",CLOSE:"Close",ADD:"Add",EDIT:"Edit",PREVIOUS_YEAR:"Previous year",AUTOSAVE:"Autosave",NEXT_YEAR:"Next year",PREVIOUS_MONTH:"Previous month",NEXT_MONTH:"Next month",SAVE_EVENTS:"Save events",CLEAR_EVENTS:"Clear events",REMOVE:"Remove",TIME_FROM:"Time from",TIME_TO:"Time to",DATE:"Date",TIME:"Time",ACTIONS:"Actions",HEADER_EVENT_NAME:"Event name",HEADER_PERSON_NAME:"Person name",ID:"Id",EVENT_LIST:"Event list",EVENTS_SAVED:"Events saved",EVENT_SAVE_ERROR:"There was an error while trying to save events"},d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],e={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},f=null,g=!1,h="localStorage",i=void 0,j=null,k=null,l=!0,m=void 0,n="top",o="",p=!0,q="#calendarEventModal",r=!1,s=!0,t=!1,u=!1,v=!1,w=!1,x=function(){return void 0!=localStorage?(this.saveAllEvents=function(){if(D instanceof Object){for(var a=[],b=0;b<D.length;b++){var c=D[b],d={};jQuery.extend(d,c),d.container=void 0,a.push(d)}var e=JSON.stringify(a);localStorage.setItem("events",e)}else localStorage.removeItem("events")},this.readAllEvents=function(){var a=localStorage.getItem("events");try{if(void 0==a||null==a)throw new Error("temp is undefined");for(var b=JSON.parse(a),c=0;c<b.length;c++){var d=b[c];bb(d,!1)}}catch(e){D=new z}},this.clearAllEvents=function(){D=new z,localStorage.removeItem("events")},this):void 0},y=function(){var a="ready";$(".calendar-loader").hide();var b=function(b){switch(a=b,b){case"load":$(".calendar-loader").fadeIn(250);break;case"idle":case"ready":$(".calendar-loader").fadeOut(500)}};this.urls={getAllEvents:""},this.setUrls=function(a){this.urls=a},this.getUrls=function(){return this.urls};var d=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.unsaved=!1}};return this.saveData=function(){var a={eventsToAdd:A,eventsToRemove:B,eventsToEdit:C},e=JSON.stringify(a);b("load"),$.ajax({type:"POST",url:this.urls.saveData,contentType:"application/json",data:e,success:function(){r||ob(c.EVENTS_SAVED,"success"),d(C),d(A),fb(!1),nb()},error:function(){ob(c.EVENT_SAVE_ERROR,"danger")},complete:function(){b("idle")}})},this.saveAllEvents=function(){this.saveData()},this.readAllPeople=function(a){void 0==a&&(a=!1),void 0!=this.urls.getPeople&&(b("load"),$.ajax({type:"GET",url:this.urls.getPeople,success:function(a){rb(a)},complete:function(){b("idle")}}))},this.readAllEvents=function(a,c){void 0==a&&(a=!1),b("load"),$.ajax({type:"GET",url:this.urls.getEvents,success:function(b){if(void 0!=b&&null!=b)for(var d=0;d<b.length;d++){var e=b[d];e.month-=1,bb(e,!1)}a&&void 0!=c&&c(),kb()},error:function(a){console.log(a)},complete:function(){b("idle")}})},this.clearAllEvents=function(){console.log("This function is not supported")},this},z=function(){return new Array},A=[],B=[],C=[],D=[],E=[];Array.prototype.contains=function(a){return-1!=this.indexOf(a)?!0:!1};var F=function(a,b,c){var d=b+1;return 10>d&&(d="0"+d),void 0!=c?(10>c&&(c="0"+c),a+"-"+d+"-"+c):void 0!=a&&void 0!=b?a+" - "+d:""},G=function(a,b){return I(b,!0)+" "+a},H=function(a){return a.length>20?a.substring(0,18)+"...":a},I=function(a,b){b&&a++;var c=String(a);return e[c]},J=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],K=function(){for(var a="#",b=0;6>b;b++){var c=Math.round(Math.random()*(J.length-1));a+=J[c]}return a},L=function(a,b,c){return b+=1,10>b&&(b="0"+b),10>c&&(c="0"+c),a+"-"+b+"-"+c},M=function(){m=CalendarTemplates,Handlebars.registerPartial("selectPartial",m.selectPartial),Handlebars.registerHelper("formatDate",F),Handlebars.registerHelper("formatEventName",H),Handlebars.registerHelper("formatTime",Y)},N=function(){M();var c=b,d="Calendar cannot be initialized. Dependency required: ";if(void 0==a.Handlebars)throw new Error(d+"Handlebars.js");if(void 0==a.jQuery)throw new Error(d+"jQuery.js");var e=!1;if("string"==typeof c)f=c;else{if("object"!=typeof c)throw new Error("Invalid options");if(f=c.selector,void 0!=c.debug&&(g=c.debug),void 0!=c.sync){var m={};if("string"==typeof c.sync?h=c.sync:"object"==typeof c.sync&&(void 0!=c.sync.type&&(h=c.sync.type),m.getEvents=c.sync.getEvents,m.saveData=c.sync.saveData,m.getPeople=c.sync.getPeople),"localStorage"!=h&&"remote"!=h)throw new Error("Invalid sync type");switch(h){case"localStorage":i=new x;break;case"remote":i=new y,i.setUrls(m),i.readAllPeople(),e=!0;break;default:i=void 0}void 0!=i.readAllEvents&&i.readAllEvents(e)}void 0!=c.showEventList&&(1==c.showEventList||0==c.showEventList)&&(p=c.showEventList);var o=function(a){return(void 0==a||"boolean"!=typeof a)&&(a=!1),a};r=o(c.autosave),t=o(c.navAltVersion),u=o(c.tabbedEventList),v=o(c.useNameInSelect)}if(void 0==f||null==f)throw new Error("Invalid selector");if(void 0==c.year||void 0==c.month&&"number"!=typeof c.year||"number"!=typeof c.month){var q=new Date;j=q.getFullYear(),k=q.getMonth()}else jb(c.year,c.month);void 0==c.panel||"bottom"!=c.panel&&"top"!=c.panel||(n=c.panel),O(),P(),Z(),Q(n),U(),W(),void 0!=c.render&&(l=c.render),l&&kb()},O=function(){var a={RESOURCES:c,tabbedEventList:u},b=m.calendarContainer(a);$(f).append(b),o=".calendar-container"},P=function(){var a={RESOURCES:c,enable_dropdown:!0,people:E};a.add=!0,a.timeFromDefault=10*X,a.timeToDefault=11*X,a.timeMaxValue=24*X;var b=m.eventModal(a);$("body").append(b)},Q=function(a){var b=G(j,k),d={currentYearMonth:b,useIcons:s,autosave:r,RESOURCES:c,navAltVersion:t},e=m.navpanel(d);"bottom"==a?$(f+" .calendar-panel-bottom").html(e):$(f+" .calendar-panel-top").html(e),void 0!=$.fn.tooltip&&(t?$(f+" .calendar-navigation button.btn-nav").tooltip():$(f+" .calendar-navigation .pagination a").tooltip())},R=function(){if(r)return!0;var a=$(".calendar-panel .event-autosave");return void 0!=a&&a.length>0?a[0].checked:!1},S=function(a,b){var c=F(b.year,b.month,b.day);a.find(".modalTitleDate").html(c),a.find(".eventDay").val(b.day),a.find(".eventId").val(b.eventId);var d=a.find(".personId");d.val(v?b.personName:b.personId);var e=a.find(".timeFrom");e.val(b.timeFrom),e.trigger("change");var f=a.find(".timeTo");f.val(b.timeTo),f.trigger("change");var g=a.find(".eventName");g.attr("value",b.eventName)},T=function(a,b){var c=a.find(".add-event"),d=a.find(".edit-event");c.hide(),d.hide(),"edit"==b?d.show():c.show()},U=function(){u&&($(f+" #event-tab-btn").click(function(){var a=$(f+" .calendar-navigation");a.css("visibility","hidden")}),$(f+" #calendar-tab-btn").click(function(){var a=$(f+" .calendar-navigation");a.css("visibility","visible")}));var a=".calendar-panel ",b=function(){w?kb():kb("calendar","label")};$(a+".prev-month").click(function(){k--,0>k&&(k=11,j--),b()}),$(a+".next-month").click(function(){k++,k>11&&(k=0,j++),b()});var c=function(a){j+=a,b()};$(a+".prev-year").click(function(){c(-1)}),$(a+".next-year").click(function(){c(1)});var d=function(a){var b=$(q),c=b.find(".personId"),d=b.find(".eventName"),e=c.val(),f=b.find(".personId option:selected").text(),g=b.find(".timeFrom"),h=b.find(".timeTo"),i=d.val();return void 0==e||""==e?!1:void 0==i||""==i?!1:(_(j,k,a,e,f,i,void 0,g.val(),h.val()),kb(),c.val(""),d.val(""),!0)},e=function(a,b){var c=a.find(".personId").val(),d=a.find(".eventName").val();return void 0==c||""==c?!1:void 0==b||""==b?!1:(b.eventId=a.find(".eventId").val(),b.personId=c,b.personName=a.find(".personId option:selected").text(),b.timeFrom=a.find(".timeFrom").val(),b.timeTo=a.find(".timeTo").val(),b.eventName=d,b.unsaved=!0,C.push(b),R()&&eb(),!0)};$(f).on("click",".panel-add-event",function(){g()});var g=function(a){var b=$(q);if(void 0==a?a=$(f).find(".week-day-div.selected"):a.addClass("selected"),a.length>0){var c=$(a).parent().data("day"),d=F(j,k,c),e=b.find(".modalTitleDate");e.html(d);var g=b.find(".eventDay");g.val(c),T(b,"add"),b.modal("show")}},h=function(a){var b=$(q);if(void 0==a?a=$(f).find(".event.selected"):a.addClass("selected"),a.length>0){var c=($(a).data("day"),$(a).data("eventid")),d=cb(c);null!=d&&(S(b,d),T(b,"edit"),b.modal("show"))}};$(f).on("click",".panel-edit-event",function(){h()}),$(f).on("click",".panel-remove-event",function(){var a=$(f).find(".event.selected");if(a.length>0){var b=($(a).data("day"),$(a).data("eventid"));void 0!=b&&(db(b),kb(),V("none"))}}),$(f).on("click",".week-day-div",function(){var a=$(this).hasClass("selected");a?V("none"):(V("add"),$(this).addClass("selected"))}),$(f).on("click",".event",function(a){a.stopPropagation();var b=$(this).hasClass("selected");b?V("none"):(V("edit"),$(this).addClass("selected"))}),$(f).on("dblclick",".event",function(){h($(this))}),$(q+" .add-event").click(function(){var a=$(q+" .eventDay").val(),b=d(a);if(b){var c=$(q);c.modal("hide"),V("none")}}),$(q+" .edit-event").click(function(){var a=$(q),b=a.find(".eventId").val(),c=cb(b);if(null!=c){var d=e(a,c);d&&(a.modal("hide"),V("none"),kb())}}),$(a+".save-events").click(function(){eb()}),$(a+".clear-events").click(function(){fb(!0),kb()}),$(a+".reload-events").click(function(){fb(!0),i.readAll(!0,function(){kb()})}),$(a+".load-people").click(function(){void 0!=i.readAllPeople&&i.readAllPeople(!0)})},V=function(a){var b=$(f+" .btn.panel-add-event"),c=$(f+" .btn.panel-edit-event"),d=$(f+" .btn.panel-remove-event"),e="disabled";b.addClass(e),c.addClass(e),d.addClass(e),$(f+" .event").removeClass("selected"),$(f+" .week-day-div").removeClass("selected"),"add"==a?b.removeClass(e):"edit"==a&&(c.removeClass(e),d.removeClass(e))},W=function(){$(".event-container").on("click",".edit-event2",function(){var a=$(this).data("eventid"),b=cb(a),c=$("#calendarEventModal");return null!=b&&(S(c,b),T(c,"edit"),c.modal("show")),!1}),$(".event-container").on("click",".remove-event2",function(){var a=$(this).data("eventid");return void 0!=a&&(db(a),kb(),V("none")),!1})},X=4,Y=function(a){var b=Math.floor(a/X);10>b&&(b="0"+b);var c=Math.floor(a%X*15);return 10>c&&(c="0"+c),b+":"+c},Z=function(){var a=q+" .timeFrom",b=q+" .timeTo",c=$(a),d=$(b);$(c).change(function(){var a=$(q+" .timeFrom-output"),b=$(this).val();a.html(Y(b))}),$(d).change(function(){var a=$(q+" .timeTo-output"),b=$(this).val();a.html(Y(b))}),$(c,d).keydown(function(){$(this).trigger("change")}),$(c).trigger("change"),$(d).trigger("change")},_=function(a,b,c,d,e,f,g,h,i,j){void 0==g&&(g=K()),void 0==j&&(j="t_"+(new Date).getTime());var k={eventId:j,personId:d,personName:e,eventName:f,color:g,unsaved:!0,year:a,month:b,day:c,timeFrom:h,timeTo:i};bb(k,!0),R()&&eb()},ab=function(a,b){return void 0==b||null==b||"boolean"!=typeof b?a:b},bb=function(a,b,c){b=ab(!1,b),c=ab(!0,c),"object"==typeof a&&(b&&(a.unsaved=!0,A.push(a)),c?D.unshift(a):D.push(a))},cb=function(a){for(var b=0;b<D.length;b++){var c=D[b];if(c.eventId==a)return c}return null},db=function(a){for(var b=null,c=0;c<D.length;c++)if(D[c].eventId==a){b=D[c];break}if(null!=b){var d=D.indexOf(b);-1!=d&&(B.push(b),D.splice(d,1))}R()&&eb()},eb=function(){void 0!=i&&i.saveAllEvents()},fb=function(a){void 0==a&&(a=!0),a&&(D=new z),A=new z,B=new z,C=new z},gb=function(a,b,c){for(var d=[],e=0;e<D.length;e++){var f=D[e];f.year==a&&f.month==b&&f.day==c&&d.push(f)}return d},hb=function(a,b){for(var c=[],d=0;d<D.length;d++){var e=D[d];e.year==a&&e.month==b&&c.push(e)}return c},ib=function(a,b){var c=new Date,d=c.getFullYear(),e=c.getMonth(),f=c.getDate(),g=new Date(a,b),h=(g.getMonth(),[]),i={days:[]},j=0,k=function(a){j++,i.days.push(a)},l=function(){h.push(i),i={days:[]}},m=new Date(g);m.setDate(m.getDate()-1);
for(var n=m.getDay(),o=0;n>o;o++)k({});var p=g.getDate();do{j%7==0&&l(i);var q={date_string:L(a,b,p),bg_color:"#DEDEDE",dayValue:p};a==d&&b==e&&p==f&&(q.current=!0);var r=gb(a,b,p);q.events=r,k(q),p++,g=new Date(a,b,p),p=g.getDate()}while(p>1);return i.days.length>0&&l(i),h},jb=function(a,b){j=a,k=b},kb=function(){var a=new Array;if(0==arguments.length)a=["calendar","events","label"];else for(var b=0;b<arguments.length;b++)a.push(arguments[b]);-1!=a.indexOf("label")&&lb(),a.indexOf("calendar")-1&&mb(),-1!=a.indexOf("events")&&nb(),null!=tb&&tb()},lb=function(){var a=G(j,k);$(".calendar-panel .currentYearMonth").html(a)},mb=function(){var a=$(o),b=j;b+=9>k?" 0"+(k+1):" "+(k+1);var c=ib(j,k),e={weekdays:d,weeks:c},f=m.calendar(e);a.html(f)},nb=function(){if(p){var a=null;a=w?hb(j,k):D;var b={events:a,useIcons:s,showId:!1,RESOURCES:c},d=m.eventList(b);$(f+" .event-container").html(a.length>0?d:"")}},ob=function(a,b){void 0==b&&(b="success");var c={alertType:b,alertMessage:a},d=m.alert(c);$(f+" .calendar-alertarea").html(d)},pb=function(a){if(7!=a.length)throw new Error("Array should have 7 elements");d=a},qb=function(a){if(12!=Object.keys(a).length)throw new Error("Object should have 12 elements");e=a},rb=function(a){E=a;var b={people:E},c=m.selectPartial(b);$(q+" .personId").replaceWith(c)},sb=function(a,b){if(void 0!=a&&null!=a&&"object"==typeof a)for(var d in a)c[d]=a[d];b&&kb()},tb=null;return N(),{render:kb,addEvent:_,removeEvent:db,getEvents:function(){return D},saveEvents:eb,clearEvents:fb,loadWeekStrings:pb,loadMonthStrings:qb,setPeople:rb,loadResources:sb}};a.Calendar=b}(window);